{"ast":null,"code":"import { Empleados } from 'src/app/models/empleados';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/empleados.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\n\nfunction EmpleadosComponent_tr_50_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵelementStart(10, \"a\", 27);\n    i0.ɵɵlistener(\"click\", function EmpleadosComponent_tr_50_Template_a_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const empleado_r7 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.editarEmpleado(empleado_r7);\n    });\n    i0.ɵɵelementStart(11, \"i\", 28);\n    i0.ɵɵtext(12, \"edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"a\", 27);\n    i0.ɵɵlistener(\"click\", function EmpleadosComponent_tr_50_Template_a_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const empleado_r7 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.eliminarEmpleado(empleado_r7._id);\n    });\n    i0.ɵɵelementStart(14, \"i\", 28);\n    i0.ɵɵtext(15, \"delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const empleado_r7 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(empleado_r7.nombre);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(empleado_r7.puesto);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(empleado_r7.departamento);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(empleado_r7.salario);\n  }\n}\n\nexport let EmpleadosComponent = /*#__PURE__*/(() => {\n  class EmpleadosComponent {\n    constructor(empleadoService) {\n      this.empleadoService = empleadoService;\n    }\n\n    ngOnInit() {\n      this.getEmpleados();\n    }\n\n    addEmpleado(empleadoForm) {\n      //console.log(empleadoForm.value);\n      //Si existe un id ya definido en el formulario \n      if (empleadoForm.value._id) {\n        //Actualizamos\n        this.empleadoService.putEmpleado(empleadoForm.value).subscribe(res => {\n          //console.log(res);\n          M.toast({\n            html: 'Empleado actualizado correctamente'\n          });\n          this.getEmpleados();\n        }, err => {\n          console.log(err);\n          M.toast({\n            html: 'Error al actualizar el emlpeado'\n          });\n        });\n      } else {\n        //Insertamos\n        //Guardarlos en la base de datos mediante el web service\n        this.empleadoService.addEmpleado(empleadoForm.value).subscribe(res => {\n          //console.log(res);\n          M.toast({\n            html: 'Empleado guardado correctamente'\n          });\n          this.getEmpleados();\n        }, err => {\n          console.log(err);\n          M.toast({\n            html: 'Error al guardar empleado'\n          });\n        });\n      } //else\n\n\n      empleadoForm.reset();\n    } //Fin del addEmpleado\n\n\n    resetForm(form) {\n      if (form) {\n        form.reset();\n      }\n\n      this.empleadoService.empleado = new Empleados();\n    } //Obtener los empleados de la base de datos\n\n\n    getEmpleados() {\n      this.empleadoService.getEmpleados().subscribe(res => {\n        this.empleadoService.empleados = res; //console.log(res);  \n      }, err => {\n        console.log(err);\n        M.toast({\n          html: 'Error al guardar el empleado'\n        });\n      });\n    } //Fin del getEmpleado\n\n\n    editarEmpleado(empleado) {\n      //Asociamos los datos del empleado con el modelo de datos para asignarlos al formulario\n      this.empleadoService.empleado = empleado;\n    } //Fin de editarEmpleado\n\n\n    eliminarEmpleado(_id) {\n      if (confirm('¿Esta seguro de eliminar al empleado')) {\n        this.empleadoService.deleteEmpleado(_id).subscribe(res => {\n          M.toast({\n            html: 'Empleado eliminado correctamente'\n          });\n          this.getEmpleados();\n        }, err => {\n          M.toast({\n            html: 'Error al eliminar el empleado'\n          });\n        }); //Suscribe\n      } //if\n\n    } //Fin de eliminarEmpleado\n\n\n  }\n\n  //Fin de la clase\n  EmpleadosComponent.ɵfac = function EmpleadosComponent_Factory(t) {\n    return new (t || EmpleadosComponent)(i0.ɵɵdirectiveInject(i1.EmpleadosService));\n  };\n\n  EmpleadosComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: EmpleadosComponent,\n    selectors: [[\"app-empleados\"]],\n    decls: 51,\n    vars: 6,\n    consts: [[1, \"container\"], [1, \"row\"], [1, \"col\", \"s5\"], [1, \"card\"], [1, \"card-content\"], [1, \"col\", \"s12\", 3, \"ngSubmit\"], [\"empleadoForm\", \"ngForm\"], [\"type\", \"hidden\", \"name\", \"_id\", 3, \"ngModel\", \"ngModelChange\"], [\"_id\", \"ngModel\"], [1, \"input-field\", \"col\", \"s12\"], [\"type\", \"text\", \"name\", \"nombre\", \"placeholder\", \"Ingrese el nombre\", 3, \"ngModel\", \"ngModelChange\"], [\"nombre\", \"ngModel\"], [\"for\", \"nombre\"], [\"type\", \"text\", \"name\", \"puesto\", \"placeholder\", \"Ingrese el puesto\", 3, \"ngModel\", \"ngModelChange\"], [\"puesto\", \"ngModel\"], [\"for\", \"puesto\"], [\"type\", \"text\", \"name\", \"departamento\", \"placeholder\", \"Ingrese el departamento\", 3, \"ngModel\", \"ngModelChange\"], [\"departamento\", \"ngModel\"], [\"for\", \"departamento\"], [\"type\", \"text\", \"name\", \"salario\", \"placeholder\", \"Ingrese el salario\", 3, \"ngModel\", \"ngModelChange\"], [\"salario\", \"ngModel\"], [\"for\", \"salario\"], [1, \"card-action\"], [1, \"btn\", 3, \"click\"], [1, \"btn\", \"right\"], [1, \"col\", \"s7\"], [4, \"ngFor\", \"ngForOf\"], [3, \"click\"], [1, \"material-icons\"]],\n    template: function EmpleadosComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r11 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelementStart(5, \"div\", 1);\n        i0.ɵɵelementStart(6, \"form\", 5, 6);\n        i0.ɵɵlistener(\"ngSubmit\", function EmpleadosComponent_Template_form_ngSubmit_6_listener() {\n          i0.ɵɵrestoreView(_r11);\n\n          const _r0 = i0.ɵɵreference(7);\n\n          return ctx.addEmpleado(_r0);\n        });\n        i0.ɵɵelementStart(8, \"input\", 7, 8);\n        i0.ɵɵlistener(\"ngModelChange\", function EmpleadosComponent_Template_input_ngModelChange_8_listener($event) {\n          return ctx.empleadoService.empleado._id = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 9);\n        i0.ɵɵelementStart(11, \"input\", 10, 11);\n        i0.ɵɵlistener(\"ngModelChange\", function EmpleadosComponent_Template_input_ngModelChange_11_listener($event) {\n          return ctx.empleadoService.empleado.nombre = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"label\", 12);\n        i0.ɵɵtext(14, \"Nombre\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 9);\n        i0.ɵɵelementStart(16, \"input\", 13, 14);\n        i0.ɵɵlistener(\"ngModelChange\", function EmpleadosComponent_Template_input_ngModelChange_16_listener($event) {\n          return ctx.empleadoService.empleado.puesto = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"label\", 15);\n        i0.ɵɵtext(19, \"Puesto\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 9);\n        i0.ɵɵelementStart(21, \"input\", 16, 17);\n        i0.ɵɵlistener(\"ngModelChange\", function EmpleadosComponent_Template_input_ngModelChange_21_listener($event) {\n          return ctx.empleadoService.empleado.departamento = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"label\", 18);\n        i0.ɵɵtext(24, \"Departamento\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\", 9);\n        i0.ɵɵelementStart(26, \"input\", 19, 20);\n        i0.ɵɵlistener(\"ngModelChange\", function EmpleadosComponent_Template_input_ngModelChange_26_listener($event) {\n          return ctx.empleadoService.empleado.salario = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"label\", 21);\n        i0.ɵɵtext(29, \"Salario\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"div\", 22);\n        i0.ɵɵelementStart(31, \"div\", 9);\n        i0.ɵɵelementStart(32, \"button\", 23);\n        i0.ɵɵlistener(\"click\", function EmpleadosComponent_Template_button_click_32_listener() {\n          i0.ɵɵrestoreView(_r11);\n\n          const _r0 = i0.ɵɵreference(7);\n\n          return ctx.resetForm(_r0);\n        });\n        i0.ɵɵtext(33, \"Limpiar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"button\", 24);\n        i0.ɵɵtext(35, \"Guardar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"div\", 25);\n        i0.ɵɵelementStart(37, \"table\");\n        i0.ɵɵelementStart(38, \"thead\");\n        i0.ɵɵelementStart(39, \"th\");\n        i0.ɵɵtext(40, \"Nombre\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(41, \"th\");\n        i0.ɵɵtext(42, \"Puesto\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(43, \"th\");\n        i0.ɵɵtext(44, \"Departamento\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(45, \"th\");\n        i0.ɵɵtext(46, \"Salario\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(47, \"th\");\n        i0.ɵɵtext(48, \"Opciones\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(49, \"tbody\");\n        i0.ɵɵtemplate(50, EmpleadosComponent_tr_50_Template, 16, 4, \"tr\", 26);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngModel\", ctx.empleadoService.empleado._id);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.empleadoService.empleado.nombre);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.empleadoService.empleado.puesto);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.empleadoService.empleado.departamento);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.empleadoService.empleado.salario);\n        i0.ɵɵadvance(24);\n        i0.ɵɵproperty(\"ngForOf\", ctx.empleadoService.empleados);\n      }\n    },\n    directives: [i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.NgForm, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel, i3.NgForOf],\n    styles: [\"\"]\n  });\n  return EmpleadosComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}